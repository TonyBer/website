<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>nOS Whitepaper</title>
    <link rel="stylesheet" href="whitepaper.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
    <script type="text/javascript">
        function CountDownTimer(date, callback) {
            var end = date;
            var _second = 1000;
            var _minute = _second * 60;
            var _hour = _minute * 60;
            var _day = _hour * 24;
            var timer;

            function showRemaining() {
                var now = new Date();
                var remaining = end - now;
                if (remaining < 0) {
                    clearInterval(timer);
                    window.location = "https://nos.io/whitepaper.pdf";
                    return;
                }
                var days = Math.floor(remaining / _day);
                var hours = Math.floor((remaining % _day) / _hour);
                var minutes = Math.floor((remaining % _hour) / _minute);
                var seconds = Math.floor((remaining % _minute) / _second);
                var value = days + 'd ' + hours + 'h ' + minutes + 'm ' + seconds + 's';
                callback(value);
            }

            timer = setInterval(showRemaining, 1000);
        }
    </script>
    <script type="text/javascript">
        function ready(callback) {
            if (document.readyState !== 'loading') {
                callback();
            } else if (document.addEventListener) {
                document.addEventListener('DOMContentLoaded', callback);
            } else {
                document.attachEvent('onreadystatechange', function() {
                    if (document.readyState === 'complete') {
                        callback();
                    }
                });
            }
        }

        ready(function() {
            var countdown = document.getElementById('countdown');
            var context = document.getElementById('chart').getContext('2d');

            var start = 1536772260000;  // Discord announcement timestamp
            var end = 1537178400000;    // Whitepaper release timestamp
            var now = new Date().getTime();

            var chart = new Chart(context, {
                type: 'doughnut',
                data: {
                    datasets: [
                        {
                            label: 'Progress',
                            backgroundColor: ['#5BBA47', '#EDEEF2'],
                            hoverBackgroundColor: ['#5BBA47', '#EDEEF2'],
                            borderWidth: 0,
                            data: [
                                Math.max(now - start, 0),
                                Math.min(end - now, end - start)
                            ]
                        }
                    ]
                },
                options: {
                    responsive: false,
                    tooltips: {
                        enabled: false
                    },
                    cutoutPercentage: 75
                }
            });

            CountDownTimer(end, function(value) {
                // update description
                countdown.innerHTML = value;
                countdown.className = "";

                // update chart progress
                var now = new Date().getTime();
                var data = chart.data.datasets[0].data;
                data[0] = Math.max(now - start, 0);
                data[1] = Math.min(end - now, end - start);
                chart.update();
            });
        });
    </script>
</head>

<body>
<div id="chart-container">
    <canvas id="chart" width="450" height="450" style="margin:0 auto;"></canvas>
    <img id="icon" src="whitepaper.svg" alt="Whitepaper" />
</div>
<div id="countdown" class="loading">&nbsp;</div>
<div class="yt-container">
    <iframe src="https://www.youtube-nocookie.com/embed/jxMA3XvKzxo" frameborder="0" allow="autoplay; encrypted-media"
            allowfullscreen></iframe>
</div>
</body>
</html>
